#HTTP权威指南读书笔记

###第四章
HTTP通信都是由TCP/IP承载的。

###4.1 TCP链接
TCP链接传输报文，不会丢失、受损、错序。

###4.1.1 TCP的可靠数据管道
1. 找到主机名
2. DNS查IP
3. 获得端口号(80)
4. 发起链接如 202.43.78.3:80
5. 向服务器发请求报文
6. 浏览器读响应报文
7. 关闭链接


###4.1.2 TCP流是分段的、由IP分组传送
* HTTP (应用层)
* TSL或SSL (安全层, https专有)
* TCP (传输层)
* IP (网络层)
* 网络接口 (数据链路层)

一条报文 -> 一个TCP链接 -> 分断 -> 装进IP分组 -> 进行网络传送         

一个IP分组包含：
* IP分组首部 - 源，目的IP地址，长度等
* TCP段首部 - 端口号，其他控制标记检查数据
* TCP数据块

###4.1.3 保持TCP链接不断地运行
* 源IP地址、源端口号、目的IP地址、目的端口号 -> 地址组件值 -> 组成一条链接（唯一）
* 不同连接的部分组件可以有相同的地址组件值

###4.14 用TCP套接字编程
操作系统提供一些操纵其TCP连接的工具。

* 服务器：等待链接     
* 客户端：获取IP:PORT,创建Socket,连接服务器     
* 服务器：通知应用程序有连接,开始读取请求   
* 客户端：连接成功,发HTT请求，等待响应
* 服务器：处理HTTP请求,回HTTP响应,关闭链接
* 客户端: 处理HTTP响应,关闭链接

###4.2 对TCP性能的考虑

###4.2.1 HTTP事务的时延
串行HTTP事务时间线:DNS查询 -> 连接 -> 请求 -> 处理 -> 响应 -> 关闭    

时延的主要原因：
1.DNS解析URI变成IP:PORT
2.客户端向服务器TCP连接请求，并等待应答
3.连接后，客户端发请求报文
4.处理数据，服务器回响应报文

### 4.42 性能聚焦区域



http://shmilbin1570.blog.163.com/blog/#m=0